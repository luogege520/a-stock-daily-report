# âœ… Gemini API è¿ç§»å®Œæˆ

## ğŸ“‹ æ›´æ–°æ‘˜è¦

æ‚¨çš„ Aè‚¡æ™šé—´å¤ç›˜æŠ¥å‘Šé¡¹ç›®å·²æˆåŠŸä» StepFun API è¿ç§»åˆ° Google Gemini APIã€‚

### ğŸ”„ å·²ä¿®æ”¹çš„æ–‡ä»¶

1. **generate_report.py**
   - âœ… API ç«¯ç‚¹æ›´æ–°ä¸º Gemini API
   - âœ… ä½¿ç”¨æ¨¡å‹ï¼š`gemini-1.5-pro`
   - âœ… ç¯å¢ƒå˜é‡ï¼š`STEPFUN_API_KEY` â†’ `GEMINI_API_KEY`
   - âœ… è¯·æ±‚/å“åº”æ ¼å¼é€‚é… Gemini

2. **.env.example**
   - âœ… æ›´æ–°ç¯å¢ƒå˜é‡ç¤ºä¾‹
   - âœ… æ·»åŠ  Gemini API é…ç½®è¯´æ˜

3. **.github/workflows/daily-report.yml**
   - âœ… æ›´æ–° GitHub Actions Secret å¼•ç”¨
   - âœ… `secrets.STEPFUN_API_KEY` â†’ `secrets.GEMINI_API_KEY`

4. **README.md**
   - âœ… æ›´æ–° API é…ç½®è¯´æ˜
   - âœ… æ·»åŠ  Gemini API å¯†é’¥è·å–æ­¥éª¤
   - âœ… æ›´æ–°å¸¸è§é—®é¢˜è§£ç­”
   - âœ… æ›´æ–°è‡´è°¢ä¿¡æ¯

### ğŸ“„ æ–°å¢çš„æ–‡ä»¶

1. **GEMINI_API_è¿ç§»è¯´æ˜.md**
   - è¯¦ç»†çš„è¿ç§»è¯´æ˜
   - API å¯¹æ¯”è¡¨
   - æ•…éšœæ’æŸ¥æŒ‡å—

2. **GEMINI_é…ç½®æŒ‡å—.md**
   - å¿«é€Ÿé…ç½®æ­¥éª¤
   - é‚®ç®±æˆæƒç è·å–æ–¹æ³•
   - æµ‹è¯•æ¸…å•

3. **update-to-gemini.sh** / **update-to-gemini.bat**
   - ä¸€é”®æ¨é€è„šæœ¬ï¼ˆLinux/Mac å’Œ Windowsï¼‰

4. **æ›´æ–°å®Œæˆè¯´æ˜.md**ï¼ˆæœ¬æ–‡ä»¶ï¼‰
   - æ›´æ–°æ‘˜è¦å’Œåç»­æ­¥éª¤

## ğŸš€ ä¸‹ä¸€æ­¥æ“ä½œ

### 1ï¸âƒ£ æ¨é€ä»£ç åˆ° GitHub

**Windows ç”¨æˆ·**ï¼š
```cmd
cd D:\é˜¶è·ƒAI\a-stock-daily-report
update-to-gemini.bat
```

**Linux/Mac ç”¨æˆ·**ï¼š
```bash
cd /path/to/a-stock-daily-report
chmod +x update-to-gemini.sh
./update-to-gemini.sh
```

**æˆ–æ‰‹åŠ¨æ¨é€**ï¼š
```bash
git add .
git commit -m "ğŸ”„ è¿ç§»åˆ° Google Gemini API"
git push origin main
```

### 2ï¸âƒ£ é…ç½® GitHub Secret

1. è®¿é—®æ‚¨çš„ GitHub ä»“åº“
2. è¿›å…¥ **Settings** â†’ **Secrets and variables** â†’ **Actions**
3. ç‚¹å‡» **New repository secret**
4. æ·»åŠ  Secretï¼š
   - **Name**: `GEMINI_API_KEY`
   - **Value**: æ‚¨çš„ Gemini API å¯†é’¥

**è·å– Gemini API å¯†é’¥**ï¼š
- è®¿é—®ï¼šhttps://makersuite.google.com/app/apikey
- ç™»å½• Google è´¦å·
- ç‚¹å‡» "Create API Key"
- å¤åˆ¶ç”Ÿæˆçš„å¯†é’¥

### 3ï¸âƒ£ æµ‹è¯•è¿è¡Œ

1. è¿›å…¥ä»“åº“çš„ **Actions** æ ‡ç­¾
2. é€‰æ‹© **Daily A-Stock Report** å·¥ä½œæµ
3. ç‚¹å‡» **Run workflow** æŒ‰é’®
4. ç­‰å¾…è¿è¡Œå®Œæˆ
5. æ£€æŸ¥æ˜¯å¦æˆåŠŸç”ŸæˆæŠ¥å‘Šå¹¶å‘é€é‚®ä»¶

## ğŸ“Š æŠ€æœ¯å˜æ›´å¯¹æ¯”

| é¡¹ç›® | ä¹‹å‰ (StepFun) | ç°åœ¨ (Gemini) |
|------|---------------|---------------|
| **API æä¾›å•†** | StepFun | Google |
| **æ¨¡å‹** | step-1-flash | gemini-1.5-pro |
| **API ç«¯ç‚¹** | api.stepfun.com | generativelanguage.googleapis.com |
| **è®¤è¯æ–¹å¼** | Bearer Token | API Key in URL |
| **è¯·æ±‚æ ¼å¼** | OpenAI å…¼å®¹ | Gemini åŸç”Ÿ |
| **æœ€å¤§è¾“å‡º** | 16,000 tokens | 8,192 tokens |
| **Temperature** | 0.3 | 0.3 |
| **å…è´¹é¢åº¦** | éœ€ä»˜è´¹ | æœ‰å…è´¹é¢åº¦ |

## âœ¨ Gemini API ä¼˜åŠ¿

- âœ… **å…è´¹é¢åº¦**ï¼šæ¯å¤© 1500 æ¬¡è¯·æ±‚
- âœ… **ç¨³å®šæ€§é«˜**ï¼šGoogle å®˜æ–¹æœåŠ¡
- âœ… **æ€§èƒ½ä¼˜ç§€**ï¼šgemini-1.5-pro æ¨¡å‹èƒ½åŠ›å¼º
- âœ… **æ˜“äºè·å–**ï¼šæ— éœ€å®¡æ ¸ï¼Œå³æ—¶å¯ç”¨
- âœ… **æ–‡æ¡£å®Œå–„**ï¼šå®˜æ–¹æ–‡æ¡£è¯¦ç»†

## ğŸ“ é…ç½®æ¸…å•

åœ¨ GitHub Secrets ä¸­ç¡®ä¿å·²é…ç½®ï¼š

- [ ] `GEMINI_API_KEY` - Google Gemini API å¯†é’¥
- [ ] `SENDER_EMAIL` - å‘ä»¶äººé‚®ç®±
- [ ] `SENDER_PASSWORD` - é‚®ç®±æˆæƒç 
- [ ] `RECIPIENT_EMAIL` - æ”¶ä»¶äººé‚®ç®±
- [ ] `SMTP_SERVER` - SMTP æœåŠ¡å™¨
- [ ] `SMTP_PORT` - SMTP ç«¯å£

## ğŸ” éªŒè¯æ­¥éª¤

### æœ¬åœ°æµ‹è¯•ï¼ˆå¯é€‰ï¼‰

```bash
# 1. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 2. åˆ›å»º .env æ–‡ä»¶
echo "GEMINI_API_KEY=your_api_key_here" > .env

# 3. æµ‹è¯•ç”ŸæˆæŠ¥å‘Š
python generate_report.py

# 4. æ£€æŸ¥ç”Ÿæˆçš„æŠ¥å‘Š
ls -l reports/
```

### GitHub Actions æµ‹è¯•

1. æ¨é€ä»£ç åï¼Œè¿›å…¥ Actions é¡µé¢
2. æ‰‹åŠ¨è§¦å‘ä¸€æ¬¡è¿è¡Œ
3. æŸ¥çœ‹è¿è¡Œæ—¥å¿—ï¼š
   - âœ… "æ­£åœ¨è°ƒç”¨ Google Gemini AI ç”ŸæˆæŠ¥å‘Š..."
   - âœ… "AI æŠ¥å‘Šç”ŸæˆæˆåŠŸ"
   - âœ… "æŠ¥å‘Šå·²ä¿å­˜åˆ°: ..."
   - âœ… "é‚®ä»¶å‘é€æˆåŠŸ"

## âš ï¸ æ³¨æ„äº‹é¡¹

### API é…é¢é™åˆ¶

Gemini API å…è´¹ç‰ˆé™åˆ¶ï¼š
- **æ¯åˆ†é’Ÿ**ï¼š15 æ¬¡è¯·æ±‚
- **æ¯å¤©**ï¼š1500 æ¬¡è¯·æ±‚

å¯¹äºæ¯æ—¥ä¸€æ¬¡çš„æŠ¥å‘Šç”Ÿæˆï¼Œå®Œå…¨è¶³å¤Ÿä½¿ç”¨ã€‚

### ç½‘ç»œè¦æ±‚

- GitHub Actions è¿è¡Œåœ¨å›½å¤–æœåŠ¡å™¨ï¼Œå¯æ­£å¸¸è®¿é—® Google æœåŠ¡
- æœ¬åœ°æµ‹è¯•éœ€è¦èƒ½è®¿é—® `generativelanguage.googleapis.com`

### æ¨¡å‹é€‰æ‹©

å½“å‰ä½¿ç”¨ `gemini-1.5-pro`ï¼Œå¦‚éœ€è°ƒæ•´ï¼š

**æ›´å¿«é€Ÿåº¦**ï¼ˆé™ä½æˆæœ¬ï¼‰ï¼š
```python
# åœ¨ generate_report.py ä¸­ä¿®æ”¹
url = f"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key={self.api_key}"
```

**æ›´å¼ºèƒ½åŠ›**ï¼š
```python
url = f"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro-latest:generateContent?key={self.api_key}"
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- ğŸ“– [README.md](README.md) - é¡¹ç›®ä¸»æ–‡æ¡£
- ğŸ”§ [GEMINI_API_è¿ç§»è¯´æ˜.md](GEMINI_API_è¿ç§»è¯´æ˜.md) - è¯¦ç»†è¿ç§»è¯´æ˜
- ğŸš€ [GEMINI_é…ç½®æŒ‡å—.md](GEMINI_é…ç½®æŒ‡å—.md) - å¿«é€Ÿé…ç½®æŒ‡å—
- ğŸŒ [Google Gemini API æ–‡æ¡£](https://ai.google.dev/docs)

## ğŸ†˜ é‡åˆ°é—®é¢˜ï¼Ÿ

### å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

**1. API Key æ— æ•ˆ**
```
é”™è¯¯ï¼šAPI key not valid
è§£å†³ï¼šæ£€æŸ¥å¯†é’¥æ˜¯å¦å®Œæ•´å¤åˆ¶ï¼Œé‡æ–°ç”Ÿæˆå¯†é’¥
```

**2. é…é¢è¶…é™**
```
é”™è¯¯ï¼šResource has been exhausted
è§£å†³ï¼šç­‰å¾…é…é¢é‡ç½®ï¼ˆæ¯å¤©é‡ç½®ï¼‰ï¼Œæˆ–å‡çº§åˆ°ä»˜è´¹ç‰ˆ
```

**3. ç½‘ç»œè¿æ¥å¤±è´¥**
```
é”™è¯¯ï¼šConnection timeout
è§£å†³ï¼šæ£€æŸ¥ç½‘ç»œï¼ŒGitHub Actions é€šå¸¸æ— æ­¤é—®é¢˜
```

**4. é‚®ä»¶å‘é€å¤±è´¥**
```
é”™è¯¯ï¼šAuthentication failed
è§£å†³ï¼šç¡®è®¤ä½¿ç”¨æˆæƒç è€Œéç™»å½•å¯†ç 
```

### è·å–å¸®åŠ©

- ğŸ› [æäº¤ Issue](https://github.com/YOUR_USERNAME/a-stock-daily-report/issues)
- ğŸ“§ æŸ¥çœ‹ GitHub Actions è¿è¡Œæ—¥å¿—
- ğŸ“– é˜…è¯»é…ç½®æ–‡æ¡£

## ğŸ‰ å®Œæˆï¼

æ­å–œï¼æ‚¨çš„é¡¹ç›®å·²æˆåŠŸè¿ç§»åˆ° Google Gemini APIã€‚

ç³»ç»Ÿå°†åœ¨æ¯ä¸ªäº¤æ˜“æ—¥æ™šä¸Š 21:00 è‡ªåŠ¨è¿è¡Œï¼Œç”Ÿæˆ Aè‚¡å¤ç›˜æŠ¥å‘Šå¹¶å‘é€åˆ°æ‚¨çš„é‚®ç®±ã€‚

---

**è¿ç§»å®Œæˆæ—¶é—´**ï¼š2026-01-29  
**ç‰ˆæœ¬**ï¼šv2.1.0 (Gemini)  
**çŠ¶æ€**ï¼šâœ… å°±ç»ª
