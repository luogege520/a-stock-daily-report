# ğŸ“‹ æ—¥å¿—ç³»ç»Ÿè¯´æ˜

## åŠŸèƒ½ç‰¹æ€§

ç³»ç»Ÿç°åœ¨åŒ…å«å®Œæ•´çš„æ—¥å¿—è®°å½•åŠŸèƒ½ï¼Œå¯ä»¥å¸®åŠ©æ‚¨å¿«é€Ÿå®šä½é—®é¢˜ã€‚

### æ—¥å¿—å†…å®¹

æ—¥å¿—ä¼šè®°å½•ä»¥ä¸‹å…³é”®ä¿¡æ¯ï¼š

1. **ç³»ç»Ÿå¯åŠ¨ä¿¡æ¯**
   - ç‰ˆæœ¬å·
   - è¿è¡Œæ—¶é—´
   - Python ç‰ˆæœ¬
   - å·¥ä½œç›®å½•

2. **ç¯å¢ƒå˜é‡æ£€æŸ¥**
   - GEMINI_API_KEY çŠ¶æ€ï¼ˆéšè—æ•æ„Ÿä¿¡æ¯ï¼‰
   - SENDER_EMAIL é…ç½®
   - RECIPIENT_EMAIL é…ç½®

3. **æ•°æ®è·å–è¿‡ç¨‹**
   - å¸‚åœºæ•°æ®è·å–çŠ¶æ€
   - è·å–åˆ°çš„æ•°æ®æ•°é‡
   - æ•°æ®è·å–é”™è¯¯è¯¦æƒ…

4. **AI API è°ƒç”¨è¯¦æƒ…**
   - API ç«¯ç‚¹
   - è¯·æ±‚é…ç½®ï¼ˆæ¨¡å‹ã€å‚æ•°ï¼‰
   - HTTP çŠ¶æ€ç 
   - å“åº”å†…å®¹é•¿åº¦
   - è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯

5. **æŠ¥å‘Šä¿å­˜ä¿¡æ¯**
   - æ–‡ä»¶è·¯å¾„
   - æ–‡ä»¶å¤§å°
   - ä¿å­˜çŠ¶æ€

6. **é‚®ä»¶å‘é€çŠ¶æ€**
   - æ”¶ä»¶äººä¿¡æ¯
   - å‘é€ç»“æœ

## æ—¥å¿—æ–‡ä»¶ä½ç½®

æ—¥å¿—æ–‡ä»¶ä¿å­˜åœ¨ `logs/` ç›®å½•ä¸‹ï¼ŒæŒ‰æ—¥æœŸå‘½åï¼š

```
logs/
  â””â”€â”€ report_2026-01-29.log
```

## æŸ¥çœ‹æ—¥å¿—

### Windows

```cmd
# æŸ¥çœ‹æœ€æ–°æ—¥å¿—
type logs\report_2026-01-29.log

# æŸ¥çœ‹æœ€å 50 è¡Œ
powershell -command "Get-Content logs\report_2026-01-29.log -Tail 50"
```

### Linux/Mac

```bash
# æŸ¥çœ‹æœ€æ–°æ—¥å¿—
cat logs/report_2026-01-29.log

# æŸ¥çœ‹æœ€å 50 è¡Œ
tail -50 logs/report_2026-01-29.log

# å®æ—¶æŸ¥çœ‹æ—¥å¿—
tail -f logs/report_2026-01-29.log
```

## æ—¥å¿—çº§åˆ«

- **INFO** - æ­£å¸¸è¿è¡Œä¿¡æ¯
- **WARNING** - è­¦å‘Šä¿¡æ¯ï¼ˆä¸å½±å“è¿è¡Œï¼‰
- **ERROR** - é”™è¯¯ä¿¡æ¯ï¼ˆå½±å“åŠŸèƒ½ï¼‰

## æ—¥å¿—ç¤ºä¾‹

### æˆåŠŸè¿è¡Œçš„æ—¥å¿—

```
2026-01-29 21:00:00 - main - INFO - ================================================================================
2026-01-29 21:00:00 - main - INFO - Aè‚¡æ™šé—´å¤ç›˜æŠ¥å‘Šç³»ç»Ÿå¯åŠ¨
2026-01-29 21:00:00 - main - INFO - ================================================================================
2026-01-29 21:00:00 - main - INFO - ç‰ˆæœ¬: v2.1.0 (Gemini)
2026-01-29 21:00:00 - main - INFO - è¿è¡Œæ—¶é—´: 2026-01-29 21:00:00 (åŒ—äº¬æ—¶é—´)
2026-01-29 21:00:00 - main - INFO - --------------------------------------------------------------------------------
2026-01-29 21:00:00 - main - INFO - æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®
2026-01-29 21:00:00 - main - INFO - --------------------------------------------------------------------------------
2026-01-29 21:00:00 - main - INFO - âœ… GEMINI_API_KEY: AIzaSyABCD...XYZ12
2026-01-29 21:00:00 - main - INFO - âœ… SENDER_EMAIL: your@email.com
2026-01-29 21:00:00 - main - INFO - âœ… RECIPIENT_EMAIL: recipient@email.com
2026-01-29 21:00:01 - generate_report - INFO - ============================================================
2026-01-29 21:00:01 - generate_report - INFO - åˆå§‹åŒ– Aè‚¡å¤ç›˜æŠ¥å‘Šç”Ÿæˆå™¨
2026-01-29 21:00:01 - generate_report - INFO - ============================================================
2026-01-29 21:00:01 - generate_report - INFO - âœ… æˆåŠŸè¯»å– API Key: AIzaSyABCD...XYZ12
2026-01-29 21:00:01 - generate_report - INFO - åˆå§‹åŒ–æ•°æ®è·å–å™¨...
2026-01-29 21:00:01 - generate_report - INFO - âœ… æ•°æ®è·å–å™¨åˆå§‹åŒ–å®Œæˆ
2026-01-29 21:00:01 - generate_report - INFO - æ­¥éª¤ 1/3: å¼€å§‹è·å–å¸‚åœºæ•°æ®
2026-01-29 21:00:05 - generate_report - INFO - âœ… å¸‚åœºæ•°æ®è·å–æˆåŠŸ
2026-01-29 21:00:05 - generate_report - INFO - è·å–åˆ° 6 ä¸ªæŒ‡æ•°æ•°æ®
2026-01-29 21:00:05 - generate_report - INFO - è·å–åˆ° 100 ä¸ªæ¿å—æ•°æ®
2026-01-29 21:00:05 - generate_report - INFO - æ­¥éª¤ 2/3: æ„å»º AI æç¤ºè¯
2026-01-29 21:00:05 - generate_report - INFO - âœ… æç¤ºè¯æ„å»ºæˆåŠŸï¼Œé•¿åº¦: 15234 å­—ç¬¦
2026-01-29 21:00:05 - generate_report - INFO - æ­¥éª¤ 3/3: è°ƒç”¨ Gemini API ç”ŸæˆæŠ¥å‘Š
2026-01-29 21:00:05 - generate_report - INFO - ============================================================
2026-01-29 21:00:05 - generate_report - INFO - å¼€å§‹è°ƒç”¨ Gemini API
2026-01-29 21:00:05 - generate_report - INFO - ============================================================
2026-01-29 21:00:05 - generate_report - INFO - API ç«¯ç‚¹: https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro:generateContent
2026-01-29 21:00:05 - generate_report - INFO - è¯·æ±‚é…ç½®:
2026-01-29 21:00:05 - generate_report - INFO -   - æ¨¡å‹: gemini-1.5-pro
2026-01-29 21:00:05 - generate_report - INFO -   - Temperature: 0.3
2026-01-29 21:00:05 - generate_report - INFO -   - Max Tokens: 8192
2026-01-29 21:00:05 - generate_report - INFO -   - æç¤ºè¯é•¿åº¦: 15234 å­—ç¬¦
2026-01-29 21:00:05 - generate_report - INFO - å‘é€ API è¯·æ±‚...
2026-01-29 21:00:25 - generate_report - INFO - æ”¶åˆ°å“åº”ï¼ŒHTTP çŠ¶æ€ç : 200
2026-01-29 21:00:25 - generate_report - INFO - âœ… AI ç”ŸæˆæˆåŠŸï¼Œå†…å®¹é•¿åº¦: 8567 å­—ç¬¦
2026-01-29 21:00:25 - generate_report - INFO - âœ… æŠ¥å‘Šç”ŸæˆæˆåŠŸ
2026-01-29 21:00:25 - generate_report - INFO - ============================================================
2026-01-29 21:00:25 - generate_report - INFO - ä¿å­˜æŠ¥å‘Šåˆ°æ–‡ä»¶
2026-01-29 21:00:25 - generate_report - INFO - ============================================================
2026-01-29 21:00:25 - generate_report - INFO - ç¡®ä¿è¾“å‡ºç›®å½•å­˜åœ¨: reports
2026-01-29 21:00:25 - generate_report - INFO - æŠ¥å‘Šæ–‡ä»¶å: Aè‚¡æ™šé—´å¤ç›˜æŠ¥å‘Š_2026-01-29.md
2026-01-29 21:00:25 - generate_report - INFO - âœ… æŠ¥å‘Šä¿å­˜æˆåŠŸ
2026-01-29 21:00:25 - generate_report - INFO - æ–‡ä»¶å¤§å°: 8567 å­—èŠ‚ (8.37 KB)
2026-01-29 21:00:25 - main - INFO - âœ… ä»»åŠ¡å®Œæˆ
```

### API Key æœªé…ç½®çš„æ—¥å¿—

```
2026-01-29 21:00:00 - generate_report - ERROR - æœªæ‰¾åˆ° GEMINI_API_KEY ç¯å¢ƒå˜é‡
2026-01-29 21:00:00 - generate_report - ERROR - è¯·æ£€æŸ¥ï¼š
2026-01-29 21:00:00 - generate_report - ERROR - 1. æœ¬åœ°è¿è¡Œï¼š.env æ–‡ä»¶ä¸­æ˜¯å¦é…ç½®äº† GEMINI_API_KEY
2026-01-29 21:00:00 - generate_report - ERROR - 2. GitHub Actionsï¼šSecrets ä¸­æ˜¯å¦æ·»åŠ äº† GEMINI_API_KEY
```

### API Key æ— æ•ˆçš„æ—¥å¿—

```
2026-01-29 21:00:05 - generate_report - ERROR - âŒ HTTP é”™è¯¯: 400 Client Error
2026-01-29 21:00:05 - generate_report - ERROR - çŠ¶æ€ç : 400
2026-01-29 21:00:05 - generate_report - ERROR - å“åº”å†…å®¹: {"error": {"message": "API key not valid"}}
2026-01-29 21:00:05 - generate_report - ERROR - é”™è¯¯ä¿¡æ¯: API key not valid
2026-01-29 21:00:05 - generate_report - ERROR - ğŸ’¡ API Key æ— æ•ˆï¼Œè¯·æ£€æŸ¥ï¼š
2026-01-29 21:00:05 - generate_report - ERROR -    1. API Key æ˜¯å¦å®Œæ•´å¤åˆ¶
2026-01-29 21:00:05 - generate_report - ERROR -    2. è®¿é—® https://makersuite.google.com/app/apikey é‡æ–°ç”Ÿæˆ
```

### ç½‘ç»œè¿æ¥å¤±è´¥çš„æ—¥å¿—

```
2026-01-29 21:00:05 - generate_report - ERROR - âŒ è¿æ¥é”™è¯¯: Failed to connect to generativelanguage.googleapis.com
2026-01-29 21:00:05 - generate_report - ERROR - å¯èƒ½åŸå› ï¼š
2026-01-29 21:00:05 - generate_report - ERROR -   1. æ— æ³•è®¿é—® Google æœåŠ¡
2026-01-29 21:00:05 - generate_report - ERROR -   2. ç½‘ç»œè¿æ¥é—®é¢˜
2026-01-29 21:00:05 - generate_report - ERROR -   3. é˜²ç«å¢™é˜»æ­¢
```

## GitHub Actions ä¸­æŸ¥çœ‹æ—¥å¿—

åœ¨ GitHub Actions è¿è¡Œé¡µé¢ï¼š

1. ç‚¹å‡»è¿è¡Œè®°å½•
2. ç‚¹å‡» "generate-and-send-report" ä»»åŠ¡
3. å±•å¼€å„ä¸ªæ­¥éª¤æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
4. æ—¥å¿—ä¼šè‡ªåŠ¨æ˜¾ç¤ºåœ¨æ§åˆ¶å°è¾“å‡ºä¸­

## é—®é¢˜æ’æŸ¥æµç¨‹

### 1. æ£€æŸ¥æ—¥å¿—æ–‡ä»¶æ˜¯å¦å­˜åœ¨

```bash
ls logs/
```

### 2. æŸ¥çœ‹æœ€æ–°æ—¥å¿—

```bash
cat logs/report_2026-01-29.log
```

### 3. æœç´¢é”™è¯¯ä¿¡æ¯

```bash
# Windows
findstr "ERROR" logs\report_2026-01-29.log

# Linux/Mac
grep "ERROR" logs/report_2026-01-29.log
```

### 4. æ ¹æ®é”™è¯¯ä¿¡æ¯å®šä½é—®é¢˜

- **æœªæ‰¾åˆ° GEMINI_API_KEY** â†’ æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®
- **API key not valid** â†’ æ£€æŸ¥ API Key æ˜¯å¦æ­£ç¡®
- **è¿æ¥é”™è¯¯** â†’ æ£€æŸ¥ç½‘ç»œè¿æ¥
- **HTTP 429** â†’ API é…é¢å·²ç”¨å®Œ

## æ—¥å¿—ä¿ç•™ç­–ç•¥

- æ—¥å¿—æ–‡ä»¶æŒ‰æ—¥æœŸå‘½åï¼Œæ¯å¤©ä¸€ä¸ªæ–‡ä»¶
- å»ºè®®å®šæœŸæ¸…ç†æ—§æ—¥å¿—ï¼ˆä¿ç•™æœ€è¿‘ 30 å¤©ï¼‰
- GitHub Actions ä¼šåœ¨è¿è¡Œæ—¥å¿—ä¸­æ˜¾ç¤ºæ‰€æœ‰è¾“å‡º

## ç¦ç”¨æ—¥å¿—ï¼ˆä¸æ¨èï¼‰

å¦‚æœæ‚¨ä¸éœ€è¦æ—¥å¿—åŠŸèƒ½ï¼Œå¯ä»¥ä¿®æ”¹ `logger_config.py` ä¸­çš„æ—¥å¿—çº§åˆ«ï¼š

```python
def setup_logger(name='a-stock-report', log_file=None, level=logging.WARNING):
```

å°† `level=logging.INFO` æ”¹ä¸º `level=logging.WARNING` æˆ– `level=logging.ERROR`

---

**æ›´æ–°æ—¶é—´**ï¼š2026-01-29  
**ç‰ˆæœ¬**ï¼šv2.1.0 (Gemini)
